<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <title>Hacker Style Firebase Chat</title>
</head>
<body>

  <h1 id="title">Hacker Style Web Chat</h1>

  <label for="username" id="labelUsername">Ismingiz:</label><br />
  <input type="text" id="username" placeholder="Ismingizni kiriting" autocomplete="off" />

  <div id="messages"></div>

  <div id="inputArea">
    <input type="text" id="messageInput" placeholder="Xabaringizni kiriting" autocomplete="off" />
    <button id="sendBtn">Yuborish</button>
  </div>

  <!-- Firebase JS SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

  <script>
    // Firebase konfiguratsiyasi - o'z loyihangiz ma'lumotlari bilan almashtiring
    const firebaseConfig = {
      apiKey: "SIZNING_API_KEY",
      authDomain: "SIZNING_PROEKT.firebaseapp.com",
      databaseURL: "https://SIZNING_PROEKT-default-rtdb.firebaseio.com",
      projectId: "SIZNING_PROEKT",
      storageBucket: "SIZNING_PROEKT.appspot.com",
      messagingSenderId: "1234567890",
      appId: "1:1234567890:web:abcdefghijk",
    };

    // Firebase boshlash
    firebase.initializeApp(firebaseConfig);

    // Hacker style ni JS bilan qo'shish
    function applyHackerStyle() {
      const body = document.body;
      Object.assign(body.style, {
        backgroundColor: "#0f0f0f",
        color: "#00ff00",
        fontFamily: "'Courier New', Courier, monospace",
        margin: "0",
        padding: "20px",
        display: "flex",
        flexDirection: "column",
        alignItems: "center",
        height: "100vh",
      });

      const title = document.getElementById("title");
      Object.assign(title.style, {
        textShadow: "0 0 5px #00ff00, 0 0 10px #00ff00",
        marginBottom: "10px",
      });

      const label = document.getElementById("labelUsername");
      Object.assign(label.style, {
        color: "#0f0",
        fontWeight: "bold",
      });

      const usernameInput = document.getElementById("username");
      Object.assign(usernameInput.style, {
        backgroundColor: "#000",
        border: "1px solid #00ff00",
        color: "#00ff00",
        padding: "10px",
        fontFamily: "monospace",
        fontSize: "16px",
        outline: "none",
        width: "250px",
        marginBottom: "15px",
        boxShadow: "0 0 5px #00ff00",
        transition: "0.3s",
      });
      usernameInput.onfocus = () => {
        usernameInput.style.borderColor = "#0f0";
        usernameInput.style.boxShadow = "0 0 10px #0f0";
      };
      usernameInput.onblur = () => {
        usernameInput.style.borderColor = "#00ff00";
        usernameInput.style.boxShadow = "0 0 5px #00ff00";
      };

      const messages = document.getElementById("messages");
      Object.assign(messages.style, {
        backgroundColor: "#000",
        border: "1px solid #00ff00",
        width: "600px",
        height: "350px",
        overflowY: "scroll",
        padding: "15px",
        boxShadow: "0 0 20px #00ff00",
        marginBottom: "10px",
      });

      const inputArea = document.getElementById("inputArea");
      Object.assign(inputArea.style, {
        display: "flex",
        width: "600px",
      });

      const messageInput = document.getElementById("messageInput");
      Object.assign(messageInput.style, {
        flex: "1",
        borderRight: "none",
        borderRadius: "5px 0 0 5px",
        backgroundColor: "#000",
        border: "1px solid #00ff00",
        color: "#00ff00",
        padding: "10px",
        fontFamily: "monospace",
        fontSize: "16px",
        outline: "none",
        boxShadow: "0 0 5px #00ff00",
        transition: "0.3s",
      });
      messageInput.onfocus = () => {
        messageInput.style.borderColor = "#0f0";
        messageInput.style.boxShadow = "0 0 10px #0f0";
      };
      messageInput.onblur = () => {
        messageInput.style.borderColor = "#00ff00";
        messageInput.style.boxShadow = "0 0 5px #00ff00";
      };

      const sendBtn = document.getElementById("sendBtn");
      Object.assign(sendBtn.style, {
        backgroundColor: "#000",
        border: "1px solid #00ff00",
        color: "#00ff00",
        padding: "10px 25px",
        fontFamily: "monospace",
        fontSize: "16px",
        cursor: "pointer",
        borderRadius: "0 5px 5px 0",
        boxShadow: "0 0 10px #00ff00",
        transition: "0.3s",
      });
      sendBtn.onmouseover = () => {
        sendBtn.style.backgroundColor = "#0f0";
        sendBtn.style.color = "#000";
        sendBtn.style.boxShadow = "0 0 20px #0f0";
      };
      sendBtn.onmouseout = () => {
        sendBtn.style.backgroundColor = "#000";
        sendBtn.style.color = "#00ff00";
        sendBtn.style.boxShadow = "0 0 10px #00ff00";
      };
    }

    applyHackerStyle();

    // Firebase ma'lumotlar bazasi bilan ishlash
    const db = firebase.database();
    const messagesRef = db.ref('messages');

    const messagesDiv = document.getElementById('messages');
    const usernameInput = document.getElementById('username');
    const messageInput = document.getElementById('messageInput');
    const sendBtn = document.getElementById('sendBtn');

    function showMessage(data) {
      const div = document.createElement('div');
      div.textContent = `${data.username}: ${data.text}`;
      div.style.textShadow = "0 0 3px #00ff00";
      div.style.whiteSpace = "pre-wrap";
      messagesDiv.appendChild(div);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    messagesRef.on('child_added', snapshot => {
      showMessage(snapshot.val());
    });

    function sendMessage() {
      const username = usernameInput.value.trim();
      const text = messageInput.value.trim();

      if (!username) {
        alert('Iltimos, ismingizni kiriting!');
        return;
      }
      if (!text) {
        alert('Xabar bo\'sh bo\'lishi mumkin emas!');
        return;
      }

      messagesRef.push({
        username,
        text,
        timestamp: Date.now()
      });

      messageInput.value = '';
      messageInput.focus();
    }

    sendBtn.addEventListener('click', sendMessage);
    messageInput.addEventListener('keypress', e => {
      if (e.key === 'Enter') sendMessage();
    });
  </script>

</body>
</html>
